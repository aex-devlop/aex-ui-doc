(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{313:function(e,t,_){"use strict";_.r(t);var r=[function(){var e=this,t=e.$createElement,t=e._self._c||t;return t("div",{staticClass:"tip"},[t("p",[e._v("资料整理: 付永顺"),t("br"),e._v("\n更新日期: 2021-08-13")])])},function(){var e=this,t=e.$createElement,t=e._self._c||t;return t("table",[t("thead",[t("tr",[t("th",[e._v("浏览器组成")]),t("th",[e._v("内核")])])]),t("tbody",[t("tr",[t("td",[e._v("用户界面")]),t("td",[e._v("浏览器菜单栏、地址栏、向前")])]),t("tr",[t("td",[e._v("浏览器引擎")]),t("td",[e._v("各组件间通信")])]),t("tr",[t("td",[e._v("渲染引擎、js引擎")]),t("td",[e._v("负责显示请求内容（解析HTML、css、解析JS脚本，并渲染出来）")])]),t("tr",[t("td",[e._v("网络模块")]),t("td",[e._v("处理网络请求，图片资源等")])]),t("tr",[t("td",[e._v("界面后端")]),t("td",[e._v("浏览器的图形库，绘制基本浏览器窗口内控件")])]),t("tr",[t("td",[e._v("数据存储")]),t("td",[e._v("管理用户数据，将浏览会话相关联的各种数据存在硬盘上（书签，cookie，缓存）")])])])])},function(){var e=this,t=e.$createElement,t=e._self._c||t;return t("table",[t("thead",[t("tr",[t("th",[e._v("浏览器")]),t("th",[e._v("内核")])])]),t("tbody",[t("tr",[t("td",[e._v("IE")]),t("td",[e._v("Trident")])]),t("tr",[t("td",[e._v("Safari")]),t("td",[e._v("WebKit")])]),t("tr",[t("td",[e._v("Opera、Chrome")]),t("td",[e._v("Blink")])]),t("tr",[t("td",[e._v("Firefox")]),t("td",[e._v("Gecko")])])])])},function(){var e=this.$createElement,e=this._self._c||e;return e("p",[e("img",{attrs:{src:_(330),alt:"1628823407881"}})])},function(){var e=this,t=e.$createElement,t=e._self._c||t;return t("ol",[t("li",[t("p",[e._v("浏览器构建请求行(请求方法\\资源路径\\HTTP版本)")])]),t("li",[t("p",[e._v("查找强缓存(下面说)")])]),t("li",[t("p",[e._v("DNS解析(下面说)---将URL 解析为对应的 IP 地址")])]),t("li",[t("p",[e._v("建立TCP(传输控制协议: 一种面向连接的, 可靠的, 基于字节流的传输层通信协议)连接:3次握手")])]),t("li",[t("p",[e._v("发送HTTP请求(请求行, 请求头, 请求体)")])]),t("li",[t("p",[e._v("网络响应(响应行, 响应头, 响应体)")])])])},function(){var e=this,t=e.$createElement,t=e._self._c||t;return t("p",[t("strong",[e._v("浏览器引擎（内核）")]),e._v("：帮助浏览器来渲染网页的内容，根据接收到的文件进行相应的解析(HTML解析器开始解析，自上而下开始解析)")])},function(){var e=this,t=e.$createElement,t=e._self._c||t;return t("ol",[t("li",[t("p",[e._v("将HTML结构字符串解析成DOM（前节点构建完成以后，才会去构建当前节点的下一个）")])]),t("li",[t("p",[e._v("将CSS解析成CSSOM，与DOM结构相似")]),t("p",[e._v("DOM和CSSOM具体构建流程 (优化点：DOM树要小，CSS尽量用id和class , 不要过度层叠下去)")])])])},function(){var e=this.$createElement,e=this._self._c||e;return e("p",[e("img",{attrs:{src:_(331),alt:"1628128175934"}})])},function(){var e=this,t=e.$createElement,t=e._self._c||t;return t("pre",[t("code",{staticClass:"language-javascript"},[e._v('   [\n       ["text", "<h1>我买了一个"],\n       ["name", "thing"],\n       ["text", "好"],\n       ["name", "mode"],\n       ["text", "啊</h1>"]\n   ]\n')])])},function(){var e=this,t=e.$createElement,t=e._self._c||t;return t("p",[t("strong",[e._v("提示")]),e._v("：mustache：一款比较经典的前端引擎模板")])},function(){var e=this.$createElement,e=this._self._c||e;return e("p",[e("img",{attrs:{src:_(332),alt:"1628823468697"}})])},function(){var e=this,t=e.$createElement,t=e._self._c||t;return t("ol",[t("li",[t("p",[e._v("js文件，等到js文件加载后，通过DOM API和CSSDOM API来操作DOM Tree和CSS Rule Tree")])]),t("li",[t("p",[e._v("**阻塞渲:  **浏览器渲染过程中遇到js文件(可能)")]),t("p",[e._v("**描述:  **遇到script标签就会停止渲染，暂停构建DOM，执行js代码，js执行完成后，再恢复构建DOM（浏览器的GUI渲染与JS引擎线程是互斥的，为防止渲染出现不可预期的结果）")]),t("p",[e._v("**原因+影响:  **由于js可改DOM、还可修改样式，所以js执行时需要更改样式，就必须拿到完整的CSSOM（CSSOM未构建完成无法使用）不仅阻塞DOM构建，还会导致CSSOM也阻止DOM的构建")]),t("p",[e._v("**结果:  **js加载运行脚本时，浏览器会先下载和构建CSSOM，再执行js，在继续构建DOM,首屏渲染慢")]),t("p",[e._v("**优化:  **少在首屏加载JS文件，减少DOM操作")]),t("p",[t("strong",[e._v("● 遵循两个原则")])]),t("p",[e._v("CSS优先：CSS资源先于js资源（ "),t("code",[e._v("<link>")]),e._v(" 标签的 rel属性设置为 preload 能够让你在你的HTML页面中可以指明哪些资源是在页面加载完成后即刻需要的,最优的配置加载顺序，提高渲染性能）")]),t("p",[e._v("javascript置后：js放页面底部，并且js应该尽量少影响DOM的构建")]),t("p",[e._v("使用webpack打包的时候，htmlWebpackPlugin插件有个属性为inject:false/head/true(body)")]),t("p",[e._v("为true表示所有"),t("strong",[e._v("JavaScript")]),e._v("资源插入到body元素的底部")]),t("p",[t("strong",[e._v("● 使用媒体类型(media type) or 媒体查询(media query)")])])])])},function(){var e=this,t=e.$createElement,t=e._self._c||t;return t("pre",[t("code",{staticClass:"language-html"},[e._v('      <link href="vue.css" rel="stylesheet" media="print"> //设置了媒体类型，会加载但不会阻塞\n      <link href="vue.css" rel="stylesheet" media="(min-width: 30em) and (orientation: landscape)">//提供了媒体查询，会在符合条件时阻塞渲染\n')])])},function(){var e=this,t=e.$createElement,t=e._self._c||t;return t("pre",[t("code",[e._v("  **● 使用defer或async(只对设置了scr属性外部脚本有效)**\n\n  相同点：并发异步的去下载对应的外部脚本文件(可能从本地缓存中获取)\n\n  不同的：\n\n  defer的script中（延迟执行）：.js文件下载完，不马上执行，等HTML解析完后，这个过程中多个脚本之间有序\n\n  async的script中（异步下载）：.js文件下载完，渲染引擎中断渲染，执行完，在渲染，这个过程中多个脚本之间无序\n")])])},function(){var e=this,t=e.$createElement,t=e._self._c||t;return t("ol",{attrs:{start:"4"}},[t("li",[t("p",[e._v("DOM+CSSOM=构建Render Tree(渲染树)≠DOM树（类似display:none，就没有必要放在渲染树中）")]),t("ul",[t("li",[t("code",[e._v("float")]),e._v(" 元素， "),t("code",[e._v("absoulte")]),e._v(" 元素， "),t("code",[e._v("fixed")]),e._v(" 元素会发生位置偏移。")]),t("li",[e._v("我们常说的脱离文档流，其实就是脱离Render Tree。")])])])])},function(){var e=this.$createElement,e=this._self._c||e;return e("p",[e("strong",[this._v("css为什么不能嵌套太多的问题")])])},function(){var e=this,t=e.$createElement,t=e._self._c||t;return t("p",[e._v("CSS选择器是从右向左进行匹配, 相比于 "),t("code",[e._v("#markdown-content-h3")]),e._v(" ，显然使用 "),t("code",[e._v("#markdown .content h3")]),e._v(" 时，浏览器生成渲染树（render-tree）所要花费的时间更多。后者需要先找到DOM中的所有 "),t("code",[e._v("h3")]),e._v(" 元素，再过滤掉祖先元素不是 "),t("code",[e._v(".content")]),e._v(" 的，最后过滤掉 "),t("code",[e._v(".content")]),e._v(" 的祖先不是 "),t("code",[e._v("#markdown")]),e._v(" 的。页面中的元素越多，嵌套的层级越多，匹配所要花费的时间越多")])},function(){var e=this,t=e.$createElement,t=e._self._c||t;return t("p",[e._v("选择器也是有权重的, 可以合理运用(避免使用"),t("strong",[e._v("h3#markdown-content")]),e._v("类似的选择器)")])},function(){var e=this,t=e.$createElement,t=e._self._c||t;return t("ol",[t("li",[t("p",[e._v("建立图层树(Layer Tree)")])]),t("li",[t("p",[e._v("生成绘制列表")])]),t("li",[t("p",[e._v("生成图块并栅格化")])]),t("li",[t("p",[e._v("显示器显示内容")])])])},function(){var e=this.$createElement,e=this._self._c||e;return e("p",[e("strong",[this._v("Reflow(回流)：元素的几个尺寸改变，需要重新计算Render Tree")])])},function(){var e=this,t=e.$createElement,t=e._self._c||t;return t("p",[e._v("● 添加、删除可见的DOM元素（"),t("strong",[e._v("display:none")]),e._v("）；")])},function(){var e=this,t=e.$createElement,t=e._self._c||t;return t("p",[e._v("● 读写 "),t("code",[e._v("offset")]),e._v(" 族、 "),t("code",[e._v("scroll")]),e._v(" 族和 "),t("code",[e._v("client")]),e._v(" 族属性。")])},function(){var e=this,t=e.$createElement,t=e._self._c||t;return t("p",[e._v("● 调用 "),t("code",[e._v("window.getComputedStyle")]),e._v(" 方法。")])},function(){var e=this,t=e.$createElement,t=e._self._c||t;return t("p",[t("code",[e._v("width")]),t("code",[e._v("height")]),t("code",[e._v("margin")]),t("code",[e._v("padding")]),t("code",[e._v("border")]),t("code",[e._v("display")])])},function(){var e=this,t=e.$createElement,t=e._self._c||t;return t("p",[t("code",[e._v("clientWidth")]),t("code",[e._v("clientHeight")]),t("code",[e._v("clientTop")]),t("code",[e._v("clientLeft")])])},function(){var e=this,t=e.$createElement,t=e._self._c||t;return t("p",[t("code",[e._v("offsetWidth")]),t("code",[e._v("offsetHeight")]),t("code",[e._v("offsetTop")]),t("code",[e._v("offsetLeft")])])},function(){var e=this,t=e.$createElement,t=e._self._c||t;return t("p",[t("code",[e._v("scrollWidth")]),t("code",[e._v("scrollHeight")]),t("code",[e._v("scrollTop")]),t("code",[e._v("scrollLeft")])])},function(){var e=this.$createElement,e=this._self._c||e;return e("p",[e("code",[this._v("geetComputedStyle()")])])},function(){var e=this.$createElement,e=this._self._c||e;return e("p",[e("strong",[this._v("Repaint(重绘)：元素的几个尺寸没有变，不影响整体布局")]),this._v("()")])},function(){var e=this,t=e.$createElement,t=e._self._c||t;return t("p",[t("code",[e._v("color")]),t("code",[e._v("background")]),t("code",[e._v("border-style")])])},function(){var e=this,t=e.$createElement,t=e._self._c||t;return t("p",[t("code",[e._v("outline-color")]),t("code",[e._v("outline")]),t("code",[e._v("border-radius")]),t("code",[e._v("box-shadow")])])},function(){var e=this.$createElement,e=this._self._c||e;return e("p",[e("strong",[this._v("优化:")])])},function(){var e=this,t=e.$createElement,t=e._self._c||t;return t("ol",[t("li",[t("p",[e._v("CSS添加类的方式修改DOM（一次性地改变样式）， 避免节点层级过多，尽可能修改层级比较低的DOM")])]),t("li",[t("p",[e._v("对于 resize、scroll 等进行防抖/节流处理。")])]),t("li",[t("p",[e._v("使用 visibility 替换 display: none ，因为前者只会引起重绘，后者会引发回流（改变了布局）")])]),t("li",[t("p",[e._v("不要把节点的属性值放在一个循环里当成循环里的变量。")])])])},function(){var e=this.$createElement,e=this._self._c||e;return e("pre",[e("code",{staticClass:"language-javascript"},[this._v("   for (let i = 0; i < 1000; i++) {\n       // 获取 offsetTop 会导致回流，因为需要去获取正确的值\n       console.log(document.querySelector('.test').style.offsetTop)\n   }\n")])])},function(){var e=this.$createElement,e=this._self._c||e;return e("ol",{attrs:{start:"5"}},[e("li",[e("p",[this._v("不要使用 table 布局，可能很小的一个小改动会造成整个 table 的重新布局")])]),e("li",[e("p",[this._v("动画实现的速度的选择，动画速度越快，回流次数越多，也可以选择使用 requestAnimationFrame(为动画的HTML元素使用fiex、absoult定位)")])])])},function(){var e=this,t=e.$createElement,t=e._self._c||t;return t("p",[e._v("直接合成: 例如CSS3 的 "),t("code",[e._v("transform(top)")]),e._v(" 、 "),t("code",[e._v("opacity")]),e._v(" 、 "),t("code",[e._v("filter")]),e._v(" 这些属性就可以实现合成的效果，也就是大家常说的"),t("strong",[e._v("GPU加速")]),e._v("(跳过布局和绘制, 进入非主线程)")])},function(){var e=this.$createElement,e=this._self._c||e;return e("p",[e("strong",[this._v("性能优化：")])])},function(){var e=this.$createElement,e=this._self._c||e;return e("h5",[e("strong",[this._v("Web(电脑网页端)缓存种类：")]),this._v(" 数据库缓存，CDN缓存，代理服务器缓存，浏览器缓存。（表现形式：超文本，超媒体、超文本传输协议）")])},function(){var e=this,t=e.$createElement,t=e._self._c||t;return t("table",[t("thead",[t("tr",[t("th",[e._v("web缓存类型")]),t("th",[e._v("描述")])])]),t("tbody",[t("tr",[t("td",[e._v("数据库缓存")]),t("td",[e._v("将查询后的数据放到内存中, 下次再查询时, 直接从内存缓存中获取, 从而提高响应速度")])]),t("tr",[t("td",[e._v("CDN缓存")]),t("td",[e._v("当发送请求时, CDN会帮计算得到内容的最短且快的路径(由网站管理员部署, 把常访问的内容当CDN中)")])]),t("tr",[t("td",[e._v("浏览器缓存")]),t("td",[e._v("每个浏览器都实现了HTTP缓存, 会根据一套与服务器约定的规矩进行缓存工作(前进\\后退功能)")])]),t("tr",[t("td",[e._v("代理服务器缓存")]),t("td",[e._v("同浏览器缓存性里类似, 规模更大, 群体更广")])])])])},function(){var e=this,t=e.$createElement,t=e._self._c||t;return t("table",[t("thead",[t("tr",[t("th",[e._v("Service Worker")]),t("th",[e._v("涉及到请求拦截, 传输协议必须为https来保障安全, 它可以让我们自己控制缓存那些文件, 如何匹配, 如何读取缓存, 并且缓存是持续性的, 离线缓存, 消息推送, 网络代理等(让js运行再主线程之外, 脱离了浏览器的窗体, 无法直接访问DOM)")])])]),t("tbody",[t("tr",[t("td",[e._v("Memory Cache:")]),t("td",[e._v("内存中的缓存, 主要包括当前页面中已经抓取的资源(样式, 脚本, 图片等), 读内存中的数据比读磁盘快, 但缓存持续性很短, 一旦关闭页面, 内存中的缓存也就释放了")])]),t("tr",[t("td",[e._v("Disk Cache:")]),t("td",[e._v("硬盘中的缓存, 存储量大, 存储时效久, 读取比较慢")])]),t("tr",[t("td",[e._v("Push Cache:")]),t("td",[e._v("推送缓存, 以上都没有, 才会被使用, 存储在Session中, 缓存时间短, 且并不会严格执行http头中的缓存指令")])])])])},function(){var e=this,t=e.$createElement,t=e._self._c||t;return t("ol",[t("li",[e._v("先在内存中查找,如果有,直接加载。")]),t("li",[e._v("减少了服务器的负担，大大提升了网站的性能")]),t("li",[e._v("加快了客户端加载网页的速度")])])},function(){var e=this,t=e.$createElement,t=e._self._c||t;return t("ol",[t("li",[e._v("先在内存中查找,如果有,直接加载。")]),t("li",[e._v("如果内存中不存在,则在硬盘中查找,如果有直接加载。")]),t("li",[e._v("如果硬盘中也没有,那么就进行网络请求。")]),t("li",[e._v("请求获取的资源缓存到硬盘和内存。")])])},function(){var e=this.$createElement,e=this._self._c||e;return e("p",[e("code",[this._v("强缓存")])])},function(){var e=this.$createElement,e=this._self._c||e;return e("p",[e("strong",[this._v("设置")])])},function(){var e=this.$createElement,e=this._self._c||e;return e("p",[e("strong",[this._v("expires:")])])},function(){var e=this.$createElement,e=this._self._c||e;return e("p",[e("strong",[this._v("Cache-Control(优先级更高):")])])},function(){var e=this,t=e.$createElement,t=e._self._c||t;return t("p",[e._v("public: 资源客户端和服务器都可以缓存, 一个请求可能要经过不同的 "),t("code",[e._v("代理服务器")]),e._v(" 最后才到达目标服务器，那么结果就是不仅仅浏览器可以缓存数据，中间的任何代理节点都可以进行缓存")])},function(){var e=this.$createElement,e=this._self._c||e;return e("p",[e("strong",[this._v("pragma")])])},function(){var e=this.$createElement,e=this._self._c||e;return e("p",[e("code",[this._v("协商缓存")])])},function(){var e=this.$createElement,e=this._self._c||e;return e("p",[e("strong",[this._v("如何设置协商缓存")])])},function(){var e=this.$createElement,e=this._self._c||e;return e("p",[e("img",{attrs:{src:_(333),alt:"1628823709672"}})])},function(){var e=this.$createElement,e=this._self._c||e;return e("p",[e("img",{attrs:{src:_(334),alt:"1628823773088"}})])},function(){var e=this.$createElement,e=this._self._c||e;return e("ol",[e("li",[e("p",[this._v("强缓存不发请求到服务器，所以有时候资源更新了浏览器还不知道，但是协商缓存会发请求到服务器，所以资源是否更新，服务器肯定知道。")])]),e("li",[e("p",[this._v("大部分web服务都默认开启协商缓存")])])])},function(){var e=this.$createElement,e=this._self._c||e;return e("ol",{attrs:{start:"3"}},[e("li",[this._v("手动输入URL, 浏览器发现缓存中有这个文件, 不会再去请求, 直接去缓存拿")])])},function(){var e=this.$createElement,e=this._self._c||e;return e("p",[e("strong",[this._v("浏览器本地存储")])])},function(){var e=this,t=e.$createElement,t=e._self._c||t;return t("p",[t("code",[e._v("Cookie")]),e._v(" 、 "),t("code",[e._v("WebStorage")]),e._v(" ( "),t("code",[e._v("localStorage")]),e._v(" 和 "),t("code",[e._v("sessionStorage")]),e._v(" )和 "),t("code",[e._v("IndexedDB")])])},function(){var e=this.$createElement,e=this._self._c||e;return e("p",[e("code",[this._v("Cookie")]),this._v(" (解决http协议无状态协议: 无法识别客户端是谁)")])},function(){var e=this.$createElement,e=this._self._c||e;return e("p",[e("code",[this._v("localStorage")]),this._v(" (与cookie相似, 针对同一域名)")])},function(){var e=this.$createElement,e=this._self._c||e;return e("p",[e("code",[this._v("sessionStorage")])])},function(){var e=this.$createElement,e=this._self._c||e;return e("p",[e("code",[this._v("IndexedDB")])])},function(){var e=this.$createElement,e=this._self._c||e;return e("p",[e("strong",[this._v("DNS(域名系统)")])])},function(){var e=this,t=e.$createElement,t=e._self._c||t;return t("ol",[t("li",[t("p",[e._v("首先搜索浏览器自身的DNS缓存, 如果存在，则域名解析到此完成。")])]),t("li",[t("p",[e._v("浏览器自身的缓存里面没有找到对应的条目，那么会尝试读取操作系统的hosts文件看是否存在对应的映射关系, 如果存在，则域名解析到此完成。")])]),t("li",[t("p",[e._v("如果本地hosts文件不存在映射关系，则查找本地DNS服务器(ISP服务器, 或者自己手动设置的DNS服务器), 如果存在, 域名到此解析完成。")])]),t("li",[t("p",[e._v("如果本地DNS服务器还没找到的话, 它就会向根服务器发出请求, 进行递归查询。")])])])},function(){var e=this.$createElement,e=this._self._c||e;return e("p",[e("strong",[this._v("CDN(内容分发网络)")])])},function(){var e=this.$createElement,e=this._self._c||e;return e("ol",[e("li",[this._v("跨运营商和跨地域访问的问题，访问延时大大降低。")]),e("li",[this._v("CDN起到了分流作用，减轻了源服务器的负载。")])])}],n=_(1),r=Object(n.a)({},function(){var e=this,t=e.$createElement,t=e._self._c||t;return t("section",{staticClass:"content aex-doc"},[t("h1",[e._v("浏览器渲染机制、以及前端需要的优化点")]),e._m(0),t("h5",[e._v("浏览器的组成")]),e._m(1),e._m(2),t("h2",[e._v("浏览器渲染的整个流程")]),e._m(3),t("h3",[e._v("输入URL到页面呈现---网络篇(浏览器请求)")]),t("p",[e._v("**目的:  **用户输入URL，浏览器向服务器发一个请求，请求URL对应的资源")]),e._m(4),t("h3",[e._v("输入URL到页面呈现---解析算法篇(加载)")]),t("p",[e._v("浏览器接收到服务器响应内容（字节）, 响应头中Content-Type值为text/html, 浏览器开始解析与渲染")]),e._m(5),e._m(6),e._m(7),t("p",[e._v("tokens是一个js的嵌套数组(模板字符串的JS表示): 抽象语法树, 虚拟节点的鼻祖")]),t("p",[e._v("例如:")]),t("p",[e._v("模板字符串")]),t("pre",[t("code",{staticClass:"language-html"},[e._v("   <h1>我买了一个"+e._s(e.thing)+",好"+e._s(e.mode)+"啊</h1>\n")])]),t("p",[e._v("tokens")]),e._m(8),t("p",[e._v("​")]),e._m(9),e._m(10),e._m(11),e._m(12),e._m(13),e._m(14),e._m(15),e._m(16),e._m(17),t("h3",[e._v("输入URL到页面呈现---解析渲染篇(渲染)")]),t("p",[e._v("Layout:  根据渲染树来对网页中的节点，节点的css定义，以及它们的从属关系，计算出每个节点在屏幕中的位置, 进行布局")]),t("p",[e._v("painting：按照算出来的规则，通过显卡，把内容画到屏幕上")]),e._m(18),e._m(19),t("p",[e._v("常见引起回流属性和方法")]),e._m(20),t("p",[e._v("● 元素尺寸改变——边距、填充、边框、宽度和高度")]),t("p",[e._v("● 浏览器窗口尺寸改变——resize事件发生时")]),e._m(21),e._m(22),t("p",[e._v("● 设置 style 属性的值")]),e._m(23),e._m(24),e._m(25),e._m(26),e._m(27),e._m(28),e._m(29),e._m(30),t("p",[e._v("一般来说，浏览器会把这样的操作积攒一批，然后做一次reflow，这又叫异步reflow或增量异步reflow。但是有些情况浏览器是不会这么做的，比如：resize(调整)窗口，改变了页面默认的字体等这些操作，浏览器会马上进行reflow。")]),t("p",[e._v("回流包涵重绘（回流必发生重绘，重绘不一定引发回流）---影响性能")]),e._m(31),e._m(32),e._m(33),e._m(34),e._m(35),e._m(36),t("p",[e._v("vue-router, 组件使用懒加载, 当访问到相关页面才请求资源")]),t("p",[e._v("图片资源的压缩，使用精灵图, iconfont字体图标")]),t("p",[e._v("开启gizp压缩: 一种http请求优化方式，通过减少文件体积来提高加载速度。html、js、css文件甚至json数据都可以用它压缩，可以减小60%以上的体积。前端配置gzip压缩，并且服务端使用nginx开启gzip，用来减小网络传输的流量大小。")]),t("p",[e._v("减少首屏的http请求")]),t("p",[e._v("多用缓存：减少首屏加载的时间")]),t("p",[e._v("webpack层面:")]),t("p",[e._v("生产环境关闭源码映射")]),t("p",[e._v("SplitChunks 抽取公有代码，提升你的应用的性能")]),t("p",[e._v("使用mini-xss-extract-plugin提取CSS 到单独的文件, 并使用optimize-css-assets-webpack-plugin来压缩CSS文件")]),t("p",[e._v("代码层面:")]),t("p",[e._v("v-for时候加key")]),t("p",[e._v("合理使用v-if, v-show\\computed, watch")]),t("p",[e._v("beforeDestroy()生命周期内执行销毁事件(定时器等)")]),e._m(37),e._m(38),t("h3",[e._v("浏览器缓存时查找顺序")]),t("p",[e._v("Service Worker--\x3eMemory Cache--\x3eDisk Cache--\x3ePush Cache")]),e._m(39),t("h3",[e._v("浏览器缓存")]),t("p",[e._v("**概念：**第一次访问网站，电脑会把网站的图片和数据下载到电脑上，当我们再次访问该网站的时候，网站就会从电脑中加载出来，这就是缓存")]),t("h5",[e._v("缓存优点")]),e._m(40),t("h5",[e._v("三级缓存原理 (访问缓存优先级)")]),e._m(41),t("h3",[e._v("浏览器缓存机制")]),t("h5",[e._v("浏览器缓存过程：强缓存，协商缓存。")]),e._m(42),t("p",[e._v("(访问URL的时候，不会向服务器发送请求，直接从缓存中读取资源，但是会返回200的状态码)")]),e._m(43),t("p",[e._v("第一次进入页面：请求服务器, 服务器应答, 浏览器会根据response Header判断是否对资源进行缓存, 如果响应头中有expires, pragma或者cache-control字段, 代表强缓存, 浏览器就会把资源存在memory cache(大部分操作系统文件等资源)或者disk cache(图像和网页等资源)中,")]),t("p",[e._v("第二次请求：浏览器判断请求参数, 如果符合强缓存条件, 直接返回状态码200, 从本地缓存中拿数据, 否则把响应参数存在request header中, 看是否符合协商缓存, 符合返回状态码304, 继续使用缓存, 不符合则服务器会返回全新资源")]),e._m(44),t("p",[e._v("控制网页缓存的字段，值为一个时间戳, 服务器返回该请求结果缓存的到期时间，意思是，再次发送请求时，如果未超过过期时间，直接使用该缓存，如果过期了则重新请求")]),t("p",[e._v("缺点: 否过期是用本地时间来判断的，本地时间是可以自己修改的")]),e._m(45),t("p",[e._v("取值:")]),e._m(46),t("p",[e._v("privite：资源只有客户端可以缓存, 中间的代理服务器不能缓存。")]),t("p",[e._v("no-cache：客户端缓存资源，但是是否缓存需要经过协商缓存来验证。")]),t("p",[e._v("no-store：不使用任何形式的缓存。")]),t("p",[e._v("max-age：缓存保质期(指定时间的秒数, 是相对时间)")]),e._m(47),t("p",[e._v("禁用网页缓存的字段，其取值为no-cache, 告诉浏览器忽略资源的缓存副本")]),e._m(48),t("p",[e._v("强缓存失效后, 浏览器携带缓存标识符向服务器发送请求, 由服务器根据缓存标识来决定是否使用缓存的过程")]),t("h5",[e._v("协商缓存生效，返回304")]),t("p",[e._v("协商缓存失效，返回200和请求结果")]),e._m(49),t("p",[e._v("方式一:")]),t("p",[e._v("Last-Modified:")]),t("p",[e._v("服务器响应请求时，返回该资源文件在服务器最后被修改的时间。")]),t("p",[e._v("If-Modified-Since:")]),t("p",[e._v("客户端再次发起该请求时，携带Last-Modified值。服务器收到该请求，发现请求头含有If-Modified-Since字段，则会根据If-Modified-Since的字段值与该资源在服务器的最后被修改时间做对比，若服务器的资源最后被修改时间大于If-Modified-Since的字段值，则重新返回资源，状态码为200；否则则返回304，代表资源无更新，可继续使用缓存文件。")]),e._m(50),t("p",[e._v("方式二:(优先级高)")]),t("p",[e._v("Etag:")]),t("p",[e._v("服务器响应请求时，返回当前资源文件的一个唯一标识(由服务器生成)。")]),t("p",[e._v("If-None-Match:")]),t("p",[e._v("客户端再次发起该请求时，携带标识Etag值，服务器收到该请求后，发现该请求头中含有If-None-Match，则会根据If-None-Match的字段值与该资源在服务器的Etag值做对比，一致则返回304，代表资源无更新，继续使用缓存文件；不一致则重新返回资源文件，状态码为200。")]),e._m(51),t("p",[e._v("一般情况")]),t("p",[e._v("HTML: 协商缓存；")]),t("p",[e._v("css、js、图片：强缓存")]),t("p",[e._v("(尽可能的命中强缓存, 更新版本时候webpack打包的时候, 在文件名带上hash值)。")]),t("p",[e._v("强缓存与协商缓存的区别:")]),e._m(52),t("p",[e._v("刷新对强缓存和协商缓存的影响:")]),t("p",[e._v("1.ctr+f5, 跳过这两个, 直接服务器加载")]),t("p",[e._v("2.f5, 跳过缓存, 会检查协商缓存")]),e._m(53),e._m(54),e._m(55),e._m(56),t("p",[e._v("同一域名发送请求, 携带相同Cookie, 服务器拿到Cookie进行解析, 拿到客户端状态(状态存储)")]),t("p",[e._v("特点:")]),t("p",[e._v("容量小4KB")]),t("p",[e._v("请求头一直携带 Cookie，造成巨大的性能浪费(请求携带了很多不必要的内容)")]),t("p",[e._v("安全性不高: 纯文本形式在浏览器和服务器中传递")]),e._m(57),t("p",[e._v("容量大5M, 持久存储")]),t("p",[e._v("只存在客户端, 不参与服务的通信")]),t("p",[e._v("接口封装, 通过localStorage暴露全局, 通过setItem, getItem操作, 方便")]),e._m(58),t("p",[e._v("容量大5M, 不是持久化存储, 页面关闭, 就不存在了")]),t("p",[e._v("只存在客户端, 不参与服务的通信")]),t("p",[e._v("接口封装, 通过sessionStorage暴露全局, 通过setItem, getItem操作, 方便")]),e._m(59),t("p",[e._v("运行在浏览器中的非关系性数据, 本质是数据库, 容量没有上限, 能存储二进制数据, 为大型数据的存储提供了接口. 无法访问跨域数据库")]),t("h5",[e._v("其他缓存")]),e._m(60),t("p",[e._v("概念: 万维网上作为域名和IP地址相互映射的一个分布式数据库")]),t("p",[e._v("DNS解析:")]),t("p",[e._v("通过域名得到对应的IP地址的过程")]),t("p",[e._v("例如:www.dnscache.com (域名)  - DNS解析 -> 11.222.33.444 (IP地址)")]),t("p",[e._v("DNS缓存")]),t("p",[e._v("浏览器, 操作系统, Local DNS, 根域名服务器, 它们都会对DNS结果做一定程度的缓存")]),t("p",[e._v("DSN查询:")]),e._m(61),e._m(62),t("p",[e._v("概念: 选择一个离用户最近的CDN节点, 最短的请求时间, 来响应用户请求, 拿到资源")]),t("p",[e._v("CDN缓存:")]),t("p",[e._v("浏览器本地缓存失效后, 浏览器会向CDN边缘节点发起请求。类似浏览器缓存, CDN边缘节点也存在着一套缓存机制. 一般会遵循http协议, 通过http响应头中的Cache-control: max-age来设置缓存时间")]),t("p",[e._v("优势:")]),e._m(63)])},r,!1,null,null,null);t.default=r.exports},330:function(e,t,_){e.exports=_.p+"static/1.8a12b7b.png"},331:function(e,t,_){e.exports=_.p+"static/2.bf88529.png"},332:function(e,t,_){e.exports=_.p+"static/3.c702088.png"},333:function(e,t,_){e.exports=_.p+"static/4.f38fa91.png"},334:function(e,t,_){e.exports=_.p+"static/5.35b816b.png"}}]);